# Autoconfiguración en Spring Boot

En la aplicación generada automáticamente por **Spring Initializer**, simplemente hemos añadido la anotación `@SpringBootApplication`. Solo con eso, ya hemos activado gran parte de la magia de Spring. Pero, si queremos entender lo que realmente ocurre, veamos qué significa.

---

## Significado de `@SpringBootApplication`

La anotación `@SpringBootApplication` es equivalente a incluir tres anotaciones:  

- `@EnableAutoConfiguration`  
- `@ComponentScan`  
- `@Configuration`  

Estas tres anotaciones trabajan juntas para facilitar la configuración automática de nuestra aplicación.

---

## 1. Autoconfiguración con `@EnableAutoConfiguration`

Al habilitar la autoconfiguración, Spring Boot intenta **adivinar y configurar los beans que probablemente necesitemos**.  

Por ejemplo:

- Si tenemos la librería **HSQLDB** (un gestor de base de datos relacional en memoria) en el classpath y no configuramos manualmente ningún bean de conexión, Spring Boot creará automáticamente una base de datos en memoria para nuestro proyecto.  

La forma más habitual de incluir librerías en el classpath es mediante un **gestor de dependencias** como Maven o Gradle.

En caso de necesidad, podemos controlar el orden de configuración usando:  

- `@AutoconfigureBefore`  
- `@AutoconfigureAfter`  

O incluso personalizar aún más creando nuestras propias clases de configuración, asegurándonos de incluirlas en el fichero `spring.factories`.

> **Tip:** Puedes explorar el fichero `spring.factories` dentro del JAR `spring-boot-test-autoconfigure` (carpeta `META-INF`) para ver ejemplos reales.

### Configuración condicional

Spring Boot ofrece anotaciones condicionales según la existencia de clases, beans o propiedades:

- `@ConditionalOnClass` / `@ConditionalOnMissingClass`  
- `@ConditionalOnBean` / `@ConditionalOnMissingBean`  
- `@ConditionalOnProperty` / `@ConditionalOnMissingProperty`  

Existen más condicionales relacionados con el tipo de aplicación, recursos, ficheros o incluso expresiones.

---

## 2. Escaneo de componentes con `@ComponentScan`

Al usar `@ComponentScan`, Spring localiza elementos anotados como:  

- `@Component`  
- `@Service`  
- `@Repository`  
- `@Controller`  

Todos estos elementos se registran automáticamente como **Spring Beans**, dentro del paquete principal de la aplicación.

---

## 3. Configuración adicional con `@Configuration`

La anotación `@Configuration` permite:

- Registrar beans adicionales en el contexto de la aplicación.  
- Importar clases de configuración adicionales usando `@Import`.  

Por lo tanto, la clase anotada como `@SpringBootApplication` actúa como **la raíz de configuración de nuestra aplicación**.

> **Nota:** Aunque se recomienda la configuración mediante anotaciones Java, si es necesario usar un fichero XML, podemos utilizar `@ImportResource` para cargar configuraciones XML.

---

## Conclusión

La autoconfiguración por defecto de Spring Boot es muy potente y nos permite empezar rápido. Pero si no nos sirve tal como está, **podemos personalizarla y sobreescribir propiedades** según nuestras necesidades.  

¡Viva la magia de Spring Boot!
